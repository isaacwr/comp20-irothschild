<!DOCTYPE html>

<html>

<head>
	<title>Captain's Log</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
		if(typeof(Storage) !== "undefined") {
			var ls = window.localStorage;
			function checkVariable() {
   				if(ls==true){
					for (i = 0; i < ls.length; i++) {
				   		var entry = ls.getItem(ls.key(i));
				   		$("#log").prepend("<p>"+entry+"</p>");
					}
				}
		 	}
		 	setTimeout(checkVariable,1000);
		 	$("body").onload= function() {
				for (i = 0; i < ls.length; i++) {
			   		var entry = ls.getItem(ls.key(i));
			   		$("#log").prepend("<p>"+entry+"</p>");
				}
		 	};
			window.onkeyup = function(e) {
				var key = e.keyCode ? e.keyCode : e.which;
			   	if (key == 13) {
			   		var input = $("#msg").val()
			   		if (input.length > 0) {
						ls.setItem(ls.length, new Date()+" - "+input);
						var entry = ls.getItem(ls.key(ls.length-1));
			   			$("#log").prepend("<p>"+entry+"</p>");
			   			$("#msg").select();
			   		}
			   	}
			}
		} else {
   			alert("Sorry! No Web Storage support...");
		}
	</script>
</head>

<body>
	<h1>Captain's Log</h1>
	<h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
	<div id="log"></div>
</body>
</html>